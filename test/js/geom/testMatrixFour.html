<html>
 <head>
  <title>Test Page for Lanyard.Geom.MatrixFour</title>
  <script language="javascript" src="/jsunit/app/jsUnitCore.js"></script>
  <script language="javascript" src="/jsunit/test-lanyard/lanyard.js"></script>
 </head>
 <body>
  <script language="javascript">
    function testConstructor() {
        var entm = new lanyard.geom.MatrixFour([ 0,  1,  2,  3,
                                                 4,  5,  6,  7,
                                                 8,  9,  10, 11,
                                                 12, 13, 14, 15 ]);

        assertTrue("ent m11", entm.get11() === 0);
        assertTrue("ent m21", entm.get21() === 1);
        assertTrue("ent m31", entm.get31() === 2);
        assertTrue("ent m41", entm.get41() === 3);

        assertTrue("ent m12", entm.get12() === 4);
        assertTrue("ent m22", entm.get22() === 5);
        assertTrue("ent m32", entm.get32() === 6);
        assertTrue("ent m42", entm.get42() === 7);

        assertTrue("ent m13", entm.get13() === 8);
        assertTrue("ent m23", entm.get23() === 9);
        assertTrue("ent m33", entm.get33() === 10);
        assertTrue("ent m43", entm.get43() === 11);

        assertTrue("ent m14", entm.get14() === 12);
        assertTrue("ent m24", entm.get24() === 13);
        assertTrue("ent m34", entm.get34() === 14);
        assertTrue("ent m44", entm.get44() === 15);

        // check to make sure the identity is set by default
        var iden = new lanyard.geom.MatrixFour(null);

        // check diagonals
        assertTrue("diag m11", 1 === iden.get11());
        assertTrue("diag m22", 1 === iden.get22());
        assertTrue("diag m33", 1 === iden.get33());
        assertTrue("diag m44", 1 === iden.get44());

        // check everything else
        assertTrue("rem m12", 0 === iden.get12());
        assertTrue("rem m13", 0 === iden.get13());
        assertTrue("rem m14", 0 === iden.get14());

        assertTrue("rem m21", 0 === iden.get21());
        assertTrue("rem m23", 0 === iden.get23());
        assertTrue("rem m24", 0 === iden.get24());

        assertTrue("rem m31", 0 === iden.get31());
        assertTrue("rem m32", 0 === iden.get32());
        assertTrue("rem m34", 0 === iden.get43());

        assertTrue("rem m41", 0 === iden.get41());
        assertTrue("rem m42", 0 === iden.get42());
        assertTrue("rem m43", 0 === iden.get43());
    }

    function testTranslate() {
        var m = new lanyard.geom.MatrixFour(null);
        var p = new lanyard.geom.Point(5, 5, 5, 1);

        var tM = m.translatePoint(p);

        assertTrue("diag m14", 5 === tM.get14()); // x
        assertTrue("diag m24", 5 === tM.get24()); // y
        assertTrue("diag m34", 5 === tM.get34()); // z
        assertTrue("diag m44", 1 === tM.get44()); // w

        assertTrue("rest m11", 1 === tM.get11());
        assertTrue("rest m12", 0 === tM.get12());
        assertTrue("rest m13", 0 === tM.get13());

        assertTrue("rest m21", 0 === tM.get21());
        assertTrue("rest m22", 1 === tM.get22());
        assertTrue("rest m23", 0 === tM.get23());

        assertTrue("rest m31", 0 === tM.get31());
        assertTrue("rest m32", 0 === tM.get32());
        assertTrue("rest m33", 1 === tM.get33());

        assertTrue("rest m41", 0 === tM.get41());
        assertTrue("rest m42", 0 === tM.get42());
        assertTrue("rest m43", 0 === tM.get43());
    }
  </script>
 </body>
</html>
